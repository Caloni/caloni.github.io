<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - Header Inútil</title>
  <meta name="author" content="" />
  <meta name="description"
        content="O Visual Studio é uma ótima ferramenta para depurar rapidamente programas sendo desenvolvidos e para o resto usamos Vim. No entanto, a versão 2010 do ambiente (ainda não testei a 2011 beta) possui um..."/>

  <meta name="generator" content="Hugo 0.67.1" />

  
  <meta itemprop="name" content="Header Inútil"/>
  <meta itemprop="description"
        content="O Visual Studio é uma ótima ferramenta para depurar rapidamente programas sendo desenvolvidos e para o resto usamos Vim. No entanto, a versão 2010 do ambiente (ainda não testei a 2011 beta) possui um..."/>
  <meta itemprop="image"
        content=""/>

  
  <meta property="og:title" content="Header Inútil"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/header-inutil/"/>
  <meta property="og:image"
        content=""/>
  <meta property="og:description"
        content="O Visual Studio é uma ótima ferramenta para depurar rapidamente programas sendo desenvolvidos e para o resto usamos Vim. No entanto, a versão 2010 do ambiente (ainda não testei a 2011 beta) possui um..."/>
  <meta property="og:site_name" content="Blogue do Caloni"/>
  <meta property="article:published_time"
        content="2012-03-27T00:00:00&#43;00:00"/>
  <meta property="article:section" content="post"/>

  
  
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site"
        content=""/>
  <meta name="twitter:title" content="Header Inútil"/>
  <meta name="twitter:description"
        content="O Visual Studio é uma ótima ferramenta para depurar rapidamente programas sendo desenvolvidos e para o resto usamos Vim. No entanto, a versão 2010 do ambiente (ainda não testei a 2011 beta) possui um..."/>
  <meta name="twitter:creator"
        content=""/>
  <meta name="twitter:image:src"
        content="
                     /images/movies.png
                   "/>

  
  <link href="" rel="alternate" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>

  
  <link rel="stylesheet" type="text/css" href="/css/capsule.min.css"/>
  
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>

  
  <script>
  
    
      <!-- Google Analytics -->
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-50557403-2', 'auto');
      ga('send', 'pageview');
    
  
  </script>
  <script src="/js/jquery.min.js"></script>
  <script src="/js/list.js"></script>

  
  <link rel="icon" href="/favicon.ico"/>
  </head>


  <body style="min-height:100vh;display:flex;flex-direction:column">

    <nav class="navbar has-shadow is-white"
     role="navigation" aria-label="main navigation">
  <div class="container">

    <div class="navbar-brand">
      <a class="navbar-item" title="Go to Home" href="/">
        <img alt="Brand" src="/brand.svg">
        <div class="title is-6">&nbsp;Blogue do Caloni</div>
      </a>

      
      <label class="button navbar-burger is-white" for="navbar-burger-state">
        <span></span>                               
        <span></span>
        <span></span>
      </label>
    </div>

    
    <input type="checkbox" id="navbar-burger-state"/>

    <div class="navbar-menu">
      <div class="navbar-end" style="padding: 10px;">
      <big><b>
       <a title="posts dessa categoria" href="/categories/blog">blog</a>  <a title="posts dessa categoria" href="/categories/cinema">cinema</a>  <a title="posts dessa categoria" href="/categories/code">code</a> 
       <a href="/caloni"><span class="icon"><i class="fa fa-user"></i></a> <a href="index.xml"><span class="icon"><i class="fa fa-rss"></i></a>
      </big></b>
      </div>
    </div>

  </div>
</nav>


      
      <div class="container">
        <p class="title">Header Inútil</p>

        <p class="subtitle">
<i>

    <a href="https://github.com/Caloni/post/commits/master/header-inutil.md" title="History">
    2012-03-27
    </a>

<span class="icon"><i class="fa fa-clock-o"></span></i>3 </i>
 <span class="icon"><i class="fa fa-pencil"></i></span><a href="https://github.com/Caloni/post/blob/master/header-inutil.md" title="GitHub">497</a>
</p>

        <div class="taglist">
            <i>Este ainda é um rascunho publicado prematuramente e está sujeito a mudanças substanciais.</i>

        </div>

        

        
          <div class="content">
            
              <p>O Visual Studio é uma ótima ferramenta para depurar rapidamente programas sendo desenvolvidos e para o resto usamos Vim. No entanto, a versão 2010 do ambiente (ainda não testei a 2011 beta) possui um pequeno deslize com sua árvore de dependências que não chega a prejudica o desenvolvedor, mas o deixa com um bug atrás da orelha.</p>
<p>Vamos supor que você crie seu super-projeto ZeroMQ e no meio dele acabe evoluindo uma nova forma de vida inútil e descartável, que aqui iremos chamar de HeaderInutil e seu fiel companheiro CppInutil:</p>
<p>OK. Ele não está fazendo nada, mas e daí? Compilo meu projeto normalmente e depuro ele como se nada estivesse acontecendo.</p>
<p>&mdash;&mdash; Rebuild All started: Project: ZeroMasQueCoisaProj, Configuration: Debug Win32 &mdash;&mdash;
Build started 27/03/2012 11:40:32.
PrepareForClean:
Deleting file &ldquo;Debug\ZeroMasQueCoisaProj.lastbuildstate&rdquo;.
InitializeBuildStatus:
Creating &ldquo;Debug\ZeroMasQueCoisaProj.unsuccessfulbuild&rdquo; because &ldquo;AlwaysCreate&rdquo; was specified.
ClCompile:
stdafx.cpp
ZeroMasQueCoisaProj.cpp
CppInutil.cpp
Generating Code&hellip;
Manifest:
Deleting file &ldquo;Debug\ZeroMasQueCoisaProj.exe.embed.manifest&rdquo;.
LinkEmbedManifest:
ZeroMasQueCoisaProj.vcxproj -&gt; c:...\Debug\ZeroMasQueCoisaProj.exe
FinalizeBuildStatus:
Deleting file &ldquo;Debug\ZeroMasQueCoisaProj.unsuccessfulbuild&rdquo;.
Touching &ldquo;Debug\ZeroMasQueCoisaProj.lastbuildstate&rdquo;.</p>
<p>Build succeeded.</p>
<p>Time Elapsed 00:00:00.73
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ==========</p>
<p>&lsquo;ZeroMasQueCoisaProj.exe&rsquo;: Loaded &lsquo;C:...\Debug\ZeroMasQueCoisaProj.exe&rsquo;, Symbols loaded.
&lsquo;ZeroMasQueCoisaProj.exe&rsquo;: Loaded &lsquo;C:\Windows\SysWOW64\ntdll.dll&rsquo;, Cannot find or open the PDB file
&lsquo;ZeroMasQueCoisaProj.exe&rsquo;: Loaded &lsquo;C:\Windows\SysWOW64\kernel32.dll&rsquo;, Cannot find or open the PDB file
&lsquo;ZeroMasQueCoisaProj.exe&rsquo;: Loaded &lsquo;C:\Windows\SysWOW64\KernelBase.dll&rsquo;, Cannot find or open the PDB file
&lsquo;ZeroMasQueCoisaProj.exe&rsquo;: Loaded &lsquo;C:\Windows\SysWOW64\msvcr100d.dll&rsquo;, Symbols loaded.
The program &lsquo;[5212] ZeroMasQueCoisaProj.exe: Native&rsquo; has exited with code 0 (0x0).</p>
<p>Show.</p>
<p>Mas o que acontece se eu precisar no momento do refactory (que deve, sim, existir) eu decidir remover meus arquivos inúteis?</p>
<p>Continuo compilando normalmente o projeto, mas na hora de depurar&hellip;</p>
<p>Mas o que ocorre? Eu acabei de compilar o projeto! E se eu compilar novamente e pressionar F5, ele continua apresentando o mesmo problema!</p>
<p>OK, não estou admitindo aqui o famigerado Rebuild All. Se você mantém projetos com mais de 200 arquivos, acho que deve repensar seus conceitos ao usar Rebuild All para tudo nessa vida.</p>
<p>Acontece que existe uma árvore de dependências que o Visual Studio mantém para saber se seu projeto foi atualizado com tudo que tem mais de novo no que diz respeito ao File System, mas às vezes se esquece de checar o FS com o que está na solution. Por conta disso, o HeaderInutil e o CppInutil continuam dentro da árvore de dependência como zumbis.</p>
<p>O que pode ser feito nesse caso (além do que os personagens de The Walking Dead costumam fazer) é configurar o arquivo devenv.exe.config (presente em %programfiles(x86)%\Microsoft Visual Studio 10.0\Common7\IDE) e adicionar as seguintes linhas após a seção configSections. (Esses passos estão descritos no blogue da equipe do VC.)</p>
<pre><code>&lt;system.diagnostics&gt;
&lt;switches&gt;
&lt;add name=&quot;CPS&quot; value=&quot;4&quot; /&gt;
&lt;/switches&gt;
&lt;/system.diagnostics&gt;
</code></pre>
<p>Depois de modificar o arquivo, reinicie o Visual Studio e tente novamente apertar F5 no mesmo projeto, mas com o DebugView aberto.</p>
<p>Como um amigo meu diria: &ldquo;AHÁ!!&quot;. Descobrimos o culpado.</p>
<p>A solução? Nesse caso não tem jeito: dar um clean no projeto e build novamente para que o VS reconstrua a árvore de dependências. Porém, agora sabemos por que precisamos do Rebuild All. Não é RebuildAllMania.</p>

            

          </div>

        <div class="taglist">
            
    
    
      <a href="/categories/code">code</a> 
      <a href="/tags/draft">draft</a> 
    
    <a href="https://twitter.com/intent/tweet?text=O%20Visual%20Studio%20%c3%a9%20uma%20%c3%b3tima%20ferramenta%20para%20depurar%20rapidamente%20programas%20sendo%20desenvolvidos%20e%20para%20o%20resto%20usamos%20Vim....%20http%3a%2f%2fwww.caloni.com.br%2fheader-inutil%2f from @caloni " style="text-decoration: underline;" title="Twitter">twitter</big></a>


        </div>

        <div class="navigation-bottom">
            <span style="float: right;"><a href="http://www.caloni.com.br/cliente-morto-nao-paga/">Cliente Morto Não Paga<span class="icon"><i class="fa fa-arrow-right"></i></span></a></span>
<span style="float: left;"><a href="http://www.caloni.com.br/2-filhos-de-francisco/"><span class="icon"><i class="fa fa-arrow-left"></i></span>2 Filhos De Francisco A História De Zezé Di Camargo e Luciano</a></span>

        </div>

      </div>

    <footer class="footer">
  <div class="container">
    <span style="float: right;"><i style="font-size: small;">Blogue do Caloni 2020. Copyright é invenção do capitalismo burguês opressor. Todos os direitos não serão reservados.</i></span>
  </div>
</footer>

  </body>

</html>
