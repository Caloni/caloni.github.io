<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">

  
  
      
  
      
  

  <head>
  <meta charset="utf-8" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - Disassembling the array operator</title>
  <meta name="author" content="" />

  <meta name="generator" content="Hugo 0.67.1" />

  
  <meta property="og:title" content="Disassembling the array operator"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/disassembling-the-array-operator/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Arrays are fascinating in C language because they are so simple and so powerful at the same time. When we start to really understand them and realize all its power we are very close to understand..."/>

  
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>

  
  
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>

  
  <script>
  
    
      <!-- Google Analytics -->
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-50557403-2', 'auto');
      ga('send', 'pageview');
    
  
  </script>
  <script src="/js/jquery.min.js"></script>
  <script src="/js/list.js"></script>

  
  <link rel="icon" href="/img/favicon.ico"/>
  </head>


  <body style="min-height:100vh;display:flex;flex-direction:column">

    <nav class="navbar has-shadow is-white"
     role="navigation" aria-label="main navigation">

  <div class="container">

    <div class="navbar-brand">
        <img alt="Brand" src="/img/brand.svg">
        &nbsp;
        <a class="navbar-item" title="Go to Home" href="/">
            <div class="is-6">Blogue do Caloni</div>
        </a>
    </div>

    

  </div>
</nav>


      
      <div class="container">
        <p class="title">

Disassembling the array operator

</p>

        <p class="subtitle">

  Wanderley Caloni,
  
    
  
    
  
  2007-06-22<a href="https://github.com/Caloni/blog/blob/master/content/posts/disassembling-the-array-operator.md">.</a>

</p>

        

        
          <div class="content">

            
              <p>Arrays are fascinating in C language because they are so simple and so powerful at the same time. When we start to really understand them and realize all its power we are very close to understand another awesome feature of the language: <strong>pointers</strong>.</p>
<p>When I was reading the <a href="http://www.amazon.com/C-Programming-Language-2nd/dp/0131103628">K&amp;R</a> book (again) I was enjoying the language specification details in the <strong>Appendix A</strong>. It was specially odd the description as an array must be accessed:</p>
<!-- raw HTML omitted -->
<p>Notice that the rules don't specify the order of expressions to access the array. In other words, it doesn't matter for the language if we use a <strong>pointer before the integer or an integer before the pointer</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cassert&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">char</span> quote[] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Show me your Code, and I&#39;ll tell you who you are.&#34;</span>;
	<span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>;
	
	std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;And the language is: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> quote [ index ] <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
	
	assert( quote[index] <span style="color:#f92672">==</span> index[quote] );
	assert( quote[<span style="color:#ae81ff">13</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">13</span>[quote] );
	assert( <span style="color:#f92672">*</span>(quote <span style="color:#f92672">+</span> index) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;That&#39;s C!&#34;</span>[<span style="color:#ae81ff">7</span>] );
	
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">13</span>[quote] <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;CThings&#34;</span>[<span style="color:#ae81ff">0</span>];
} 

</code></pre></div><p>The quote[index] bellow shows that we can use both orders and the code will compile successfully (<a href="/images/2007/06/disassembling-array.cpp">try it</a>!).</p>
<p><em><strong>std::cout &lt;&lt; &quot;And the language is: &quot; &lt;&lt; index [ quote ] &lt;&lt; std::endl;</strong></em></p>
<p>This code doesn't show how obscure we can be. If we use a <strong>constant integer</strong> replacing the index, by example, the code starts to be an <a href="http://www.ioccc.org/">IOCCC</a> participant:</p>
<p><em><strong>std::cout &lt;&lt; &quot;And the language is: &quot; &lt;&lt; 13 [ quote ] &lt;&lt; std::endl;</strong></em></p>
<p>Is this a valid code yet, right? The expression types are following the rule. It is easy to see if we always think about using the &quot;universal match&quot; *<strong>( (E1) + (E2) )</strong>. Even bizarre things like this are easy to realize:</p>
<p><em><strong>std::cout &lt;&lt; 8[&quot;Is this Code right?&quot;] &lt;&lt; std::endl;</strong></em></p>
<p><em>Obs.: this kind of &quot;obscure rule&quot; hardly will pass in a code review since it is a <strong>useless feature</strong>. Be wise and <strong>don't use it in production code</strong>. This is just an amusing detail in the language specification scope. It can help in analysis, never in programming.</em></p>

            

          </div>

        <div class="taglist">
            
    
      <a href="/tags/draft">draft</a>  <a href="/tags/code">code</a> 
    


        </div>

        <div class="navigation-bottom">
            <span class="next-in-section"><a href="http://www.caloni.com.br/historia-do-windows-parte-10/">&#x25C1; História do Windows - parte 1.0</a></span>
<span class="prev-in-section"><a href="http://www.caloni.com.br/introducao-ao-debugging-tools-for-windows/">&#x25B7; Introdução ao Debugging Tools for Windows</a></span>

        </div>

      </div>

    <footer class="footer">
  <div class="container">
    <span style="float: right;"><i style="font-size: small;">Blogue do Caloni 2021<a href="https://github.com/Caloni/blog">.</a> </i></span>
  </div>
</footer>

  </body>

</html>
