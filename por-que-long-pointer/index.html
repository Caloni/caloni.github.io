<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - Por que Long Pointer</title>
  <meta name="author" content="" />
  <meta name="description"
        content="Esse artigo continua a explicação sobre os typedefs arcaicos, já que ainda falta explicar por que diabos os ponteiros da Microsoft começam com LP. Tentei explicar para minha pupila que, por ser código..."/>

  <meta name="generator" content="Hugo 0.67.1" />

  
  <meta itemprop="name" content="Por que Long Pointer"/>
  <meta itemprop="description"
        content="Esse artigo continua a explicação sobre os typedefs arcaicos, já que ainda falta explicar por que diabos os ponteiros da Microsoft começam com LP. Tentei explicar para minha pupila que, por ser código..."/>
  <meta itemprop="image"
        content=""/>

  
  <meta property="og:title" content="Por que Long Pointer"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/por-que-long-pointer/"/>
  <meta property="og:image"
        content=""/>
  <meta property="og:description"
        content="Esse artigo continua a explicação sobre os typedefs arcaicos, já que ainda falta explicar por que diabos os ponteiros da Microsoft começam com LP. Tentei explicar para minha pupila que, por ser código..."/>
  <meta property="og:site_name" content="Blogue do Caloni"/>
  <meta property="article:published_time"
        content="2010-04-21T00:00:00&#43;00:00"/>
  <meta property="article:section" content="post"/>

  
  
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site"
        content=""/>
  <meta name="twitter:title" content="Por que Long Pointer"/>
  <meta name="twitter:description"
        content="Esse artigo continua a explicação sobre os typedefs arcaicos, já que ainda falta explicar por que diabos os ponteiros da Microsoft começam com LP. Tentei explicar para minha pupila que, por ser código..."/>
  <meta name="twitter:creator"
        content=""/>
  <meta name="twitter:image:src"
        content="
                     /images/movies.png
                   "/>

  
  <link href="" rel="alternate" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>

  
  <link rel="stylesheet" type="text/css" href="/css/capsule.min.css"/>
  
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>

  
  <script>
  
    
      <!-- Google Analytics -->
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-50557403-2', 'auto');
      ga('send', 'pageview');
    
  
  </script>
  <script src="/js/jquery.min.js"></script>
  <script src="/js/list.js"></script>

  
  <link rel="icon" href="/favicon.ico"/>
  </head>


  <body style="min-height:100vh;display:flex;flex-direction:column">

    <nav class="navbar has-shadow is-white"
     role="navigation" aria-label="main navigation">
  <div class="container">

    <div class="navbar-brand">
      <a class="navbar-item" title="Go to Home" href="/">
        <img alt="Brand" src="/brand.svg">
        <div class="title is-6">&nbsp;Blogue do Caloni</div>
      </a>

      
      <label class="button navbar-burger is-white" for="navbar-burger-state">
        <span></span>                               
        <span></span>
        <span></span>
      </label>
    </div>

    
    <input type="checkbox" id="navbar-burger-state"/>

    <div class="navbar-menu">
      <div class="navbar-end" style="padding: 10px;">
      <big><b>
       <a title="posts dessa categoria" href="/categories/blog">blog</a>  <a title="posts dessa categoria" href="/categories/cinema">cinema</a>  <a title="posts dessa categoria" href="/categories/code">code</a> 
       <a href="/caloni"><span class="icon"><i class="fa fa-user"></i></a> <a href="index.xml"><span class="icon"><i class="fa fa-rss"></i></a>
      </big></b>
      </div>
    </div>

  </div>
</nav>


      
      <div class="container">
        <p class="title">Por que Long Pointer</p>

        <p class="subtitle">
<i>

    <a href="https://github.com/Caloni/post/commits/master/por-que-long-pointer.md" title="History">
    2010-04-21
    </a>

<span class="icon"><i class="fa fa-clock-o"></span></i>4 </i>
 <span class="icon"><i class="fa fa-pencil"></i></span><a href="https://github.com/Caloni/post/blob/master/por-que-long-pointer.md" title="GitHub">808</a>
</p>

        <div class="taglist">
            <i>Este ainda é um rascunho publicado prematuramente e está sujeito a mudanças substanciais.</i>

        </div>

        

        
          <div class="content">
            
              <p>Esse artigo continua a explicação sobre os typedefs arcaicos, já que ainda falta explicar por que diabos os ponteiros da Microsoft começam com LP. Tentei explicar para minha pupila que, por ser código dos anos 80, as pessoas usavam LP para tudo, pois os CDs ainda não estavam tão difundidos.</p>
<pre><code>&lt;span style=&quot;color: #808000;&quot;&gt;/** @brief Para instanciar um Bozo. @date 1982-02-21 */ 
typedef struct _BOZO { 
   char helloMsg[100]; /* definir para &quot;alô, criançada, o bozo chegou...&quot; */ 
   float currentTime; /* definir para 5e60 */ 
}
 BOZO, &lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;*LP&lt;/span&gt;&lt;/span&gt;BOZO;&lt;/span&gt;


&lt;span style=&quot;color: #339966;&quot;&gt;/** @brief Para instanciar um Pokemon. @date 1996-03-01 */&lt;/span&gt; 
&lt;span style=&quot;color: #0000ff;&quot;&gt;typedef&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #808080;&quot;&gt;_PIKACHU&lt;/span&gt; 
&lt;span style=&quot;color: #ff00ff;&quot;&gt;{&lt;/span&gt; 
&lt;span style=&quot;color: #0000ff;&quot;&gt; char&lt;/span&gt; &lt;span style=&quot;color: #808080;&quot;&gt;helloMsg&lt;/span&gt;&lt;span style=&quot;color: #ff00ff;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #00ccff;&quot;&gt;100&lt;/span&gt;&lt;span style=&quot;color: #ff00ff;&quot;&gt;]&lt;/span&gt;; &lt;span style=&quot;color: #339966;&quot;&gt;// setar para &quot;pika, pika pikachuuuuuuu...&quot;&lt;/span&gt; 
&lt;span style=&quot;color: #0000ff;&quot;&gt; int &lt;/span&gt;&lt;span style=&quot;color: #808080;&quot;&gt;pokemonID&lt;/span&gt;&lt;span style=&quot;color: #ff00ff;&quot;&gt;;&lt;/span&gt; &lt;span style=&quot;color: #339966;&quot;&gt;// setar para &lt;/span&gt;&lt;span style=&quot;color: #ff00ff;&quot;&gt;24&lt;/span&gt; 
&lt;span style=&quot;color: #ff00ff;&quot;&gt;}
&lt;/span&gt;&lt;span style=&quot;color: #808080;&quot;&gt;PIKACHU&lt;/span&gt;&lt;span style=&quot;color: #ff00ff;&quot;&gt;,&lt;/span&gt; &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;*CD&lt;/span&gt;&lt;/span&gt;PIKACHU&lt;span style=&quot;color: #ff00ff;&quot;&gt;;&lt;/span&gt;
</code></pre>
<p>Não colou. Então vou tentar explicar do jeito certo.</p>
<p>Antigamente, as pessoas mandavam cartas umas para as outras. Carta, para você, caro leitor de quinze anos, era um e-mail implementado em hardware.</p>
<p>Para mandar um e-mail, usamos o nome da pessoa e o domínio em que seu e-mail é endereçado, ex: <a href="mailto:nome-da-pessoa@dominio.com.br">nome-da-pessoa@dominio.com.br</a>. Para mandar uma carta usamos duas informações básicas: o nome da rua e o número da casa.</p>
<p>Consequentemente enviamos dois comandos ao carteiro: meu amigo, vá para a rua tal. Chegando lá, encontre o número 1065.</p>
<p>Considere que estamos falando do mesmo bairro ou cidade, o que na minha analogia seria um computador e sua memória. Para enviar cartas para outros bairros em outras cidades (outros computadores em outras redes) teríamos que informar também outros dados, como nome da cidade e CEP.</p>
<p>Nesse exemplo também podemos usar o Juquinha do bairro para entregar a carta e economizarmos 10 centavos.</p>
<p>Agora, repare que interessante: em uma rua, cabem no máximo N casas. Se você tentar construir mais casas vai acabar invadindo o espaço de outra rua.</p>
<p>E, já que estamos falando do endereço do destinatário, já podemos relevar que esse endereço constitui um ponteiro em nossa analogia. Se você está usando dois dados para informar o endereço, então estamos falando de um ponteiro longo, long pointer, ou LP!</p>
<p>Na terminologia Intel para as plataformas 16 bits, a memória do computador era acessível através de segmentos (ruas) e offsets (números), que eram pedaços da memória onde cabiam no máximo N bytes. Para conseguir mais bytes é necessário alocar memória em outro segmento (outra rua).</p>
<p>Os ponteiros que conseguiam fazer isso eram chamados de long pointers, pois podiam alcançar uma memória mais &ldquo;longa&rdquo;. Os ponteiros que apenas endereçavam o offset (número) eram chamados, em detrimento, short pointers, pois podiam apenas apontar para a memória do seu segmento (rua).</p>
<p>Ora, se seu destinatário está na mesma rua que você, tudo que você tem a dizer ao Juquinha é: &ldquo;Juquinha, seu moleque, entrega essa carta no número 1065, e vai rápido!&quot;. Nesse caso você está usando um short pointer.</p>
<p>Porém, no exemplo que demos, o destinatário está em outra rua. Se o Juquinha entregar a carta no número 1065, mas na rua errada, estará errando o destinatário. Por isso é que você deve usar um long pointer e falar para o Juquinha do segmento!</p>
<p>&ldquo;Juquinha, seu moleque safado, entrega essa carta no Segmento 0xAC89, Offset 0x496E. E vê se anda logo!&rdquo;</p>
<p>Essa frase era muito usada nos anos 80, com seus 16 bits e tudo mais.</p>
<p>Com toda essa analogia, fica fácil perceber que o Windows não cabe em uma rua só. Seus aplicativos precisam de muitas ruas para rodar. Isso exige que todos seus ponteiros sejam long, pois do contrário o Juquinha estará entregando as cartas sempre nos endereços errados. Dessa forma, foi estipulado o typedef arcaico padrão para todos os tipos da API que usasse LP (Long Pointer) como prefixo:</p>
<pre><code>typedef unsigned long WORD, *LPDWORD;
typedef const char* LPCSTR;
typedef &lt;coloque-seu-tipo-aqui&gt; APELIDO, *LPAPELIDO;
</code></pre>
<p>E é por isso que, historicamente, todos os ponteiros para os apelidos da API Win32 possuem sua contraparte LP.</p>
<p>Com a era 32 bits (e mais atualmente 64 bits) os endereços passaram a ser flat, ou seja, apontam para qualquer lugar na memória. Se eu quisesse continuar minha analogia falaria que é o equivalente a uma coordenada GPS, também muito na moda, e que pode apontar para qualquer lugar do planeta. Eu, por exemplo, já trabalhei perto das coordenadas -23.563596,-46.653885, o que eu costumo dizer que fica bem próximo do Paraíso =).</p>
<p>De uns anos pra cá, existem novos typedefs nos headers que permitem o uso dos apelidos Win32 apenas com um P inicial.</p>
<pre><code>typedef unsigned long WORD, *LPDWORD, *PDWORD;
typedef const char *LPCSTR, *PCSTR;
typedef &lt;coloque-seu-tipo-aqui&gt; APELIDO, *LPAPELIDO, *PAPELIDO;
</code></pre>
<p>A escolha é livre. Assim como com o typedef arcaico.</p>

            

          </div>

        <div class="taglist">
            
    
    
      <a href="/categories/code">code</a> 
      <a href="/tags/draft">draft</a> 
    
    <a href="https://twitter.com/intent/tweet?text=Esse%20artigo%20continua%20a%20explica%c3%a7%c3%a3o%20sobre%20os%20typedefs%20arcaicos%2c%20j%c3%a1%20que%20ainda%20falta%20explicar%20por%20que%20diabos%20os%20ponteiros%20da...%20http%3a%2f%2fwww.caloni.com.br%2fpor-que-long-pointer%2f from @caloni " style="text-decoration: underline;" title="Twitter">twitter</big></a>


        </div>

        <div class="navigation-bottom">
            <span style="float: right;"><a href="http://www.caloni.com.br/alice-no-pais-das-maravilhas-2010/">Alice no País das Maravilhas<span class="icon"><i class="fa fa-arrow-right"></i></span></a></span>
<span style="float: left;"><a href="http://www.caloni.com.br/typedef-arcaico/"><span class="icon"><i class="fa fa-arrow-left"></i></span>Typedef arcaico</a></span>

        </div>

      </div>

    <footer class="footer">
  <div class="container">
    <span style="float: right;"><i style="font-size: small;">Blogue do Caloni 2020. Copyright é invenção do capitalismo burguês opressor. Todos os direitos não serão reservados.</i></span>
  </div>
</footer>

  </body>

</html>
